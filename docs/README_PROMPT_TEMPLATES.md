# プロンプトテンプレートファイルの使用方法

## 概要

外部ファイルからプロンプトテンプレートを読み込む機能により、大きなプロンプトテンプレートを管理しやすくなります。

## 読み込み優先順位

1. **環境変数 `PROMPT_TEMPLATE`**（直接指定）
2. **環境変数 `PROMPT_TEMPLATE_FILE`**（ファイル指定）
3. **外部ファイル `prompt_template.txt`**
4. **デフォルトプロンプトテンプレート**（コード内蔵）

## 使用方法

### 方法 1: デフォルトファイルを使用

```bash
# prompt_template.txt が自動的に読み込まれます
python slack_daily_report.py
```

### 方法 2: 環境変数でファイルを指定

```bash
# .env ファイルで設定
PROMPT_TEMPLATE_FILE=prompt_template_zundamon.txt

# またはコマンドラインで指定
PROMPT_TEMPLATE_FILE=prompt_template_simple.txt python slack_daily_report.py
```

### 方法 3: 環境変数で直接指定

```bash
# .env ファイルで設定
PROMPT_TEMPLATE="独自のプロンプトテンプレート文字列"
```

## 付属のプロンプトテンプレートファイル

### `prompt_template.txt`（デフォルト）

- 標準的な日報形式
- 丁寧語で自然な文章
- 番号付きリストと箇条書きを使用

### `prompt_template_zundamon.txt`

- ずんだもん風の可愛い口調
- 「〜なのだ」口調
- ネストしたリスト形式

### `prompt_template_simple.txt`

- シンプルで簡潔な形式
- 最小限の情報のみ
- 短時間で生成

## カスタマイズ

### 新しいプロンプトテンプレートファイルの作成

1. 新しいファイルを作成（例: `my_prompt_template.txt`）
2. 使用可能な変数を使用してプロンプトを記述
3. 環境変数 `PROMPT_TEMPLATE_FILE` で指定

### 使用可能な変数

- `{messages}` - 分析対象のメッセージ
- `{current_datetime}` - 現在の日時（YYYY-MM-DD HH:MM）
- `{message_count}` - メッセージ数
- `{channel_list}` - 対象チャンネル一覧
- `{character_name}` - キャラクター名
- `{character_tone}` - キャラクターの口調
- `{character_description}` - キャラクターの説明

## 例

### カスタムプロンプトテンプレート例

```
今日のSlackメッセージを分析します。

メッセージ: {messages}

## 📋 業務レポート ({current_datetime})

**統計情報**
- メッセージ数: {message_count}件
- 対象チャンネル: {channel_list}

**今日の作業**
- [ ] 作業内容1
- [ ] 作業内容2

**明日の予定**
- [ ] 予定1
- [ ] 予定2

---
Generated by {character_name}
```

### 使用例

```bash
# ずんだもん風で生成
PROMPT_TEMPLATE_FILE=prompt_template_zundamon.txt python slack_daily_report.py

# シンプル形式で生成
PROMPT_TEMPLATE_FILE=prompt_template_simple.txt python slack_daily_report.py
```

## 注意事項

- プロンプトテンプレートファイルは UTF-8 エンコーディングで保存してください
- ファイルが見つからない場合は自動的にデフォルトプロンプトテンプレートが使用されます
- 変数名は `{variable_name}` の形式で記述してください
- 改行やインデントも含めて正確に記述してください
